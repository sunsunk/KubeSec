apiVersion: batch/v1
kind: CronJob
metadata:
  name: lookout-v2-db-pruner
  labels:
    
spec:
  schedule: dynamic_parameters
  concurrencyPolicy: Forbid
  jobTemplate:
    metadata:
      name: lookout-v2-db-pruner
      labels:
        
    spec:
      backoffLimit: 6
      template:
        metadata:
          name: lookout-v2-db-pruner
          labels:
            
        spec:
          restartPolicy: Never
          serviceAccountName: dynamic_parameters
          securityContext:
            runAsUser: 1000
            runAsGroup: 2000
          containers:
            - name: lookout-v2
              imagePullPolicy: IfNotPresent
              image: dynamic_parameters:dynamic_parameters
              args:
                - --pruneDatabase
                - --config
                - /config/application_config.yaml
              env:
              resources:
              volumeMounts:
                - name: user-config
                  mountPath: /config/application_config.yaml
                  subPath: dynamic_parameters
                  readOnly: true
              securityContext:
                allowPrivilegeEscalation: false
          volumes:
            - name: user-config
              secret:
                secretName: dynamic_parameters

---
