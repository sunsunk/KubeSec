---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: dynamic_parameters-aggregated-apiserver
  namespace: dynamic_parameters
  labels:
    
spec:
  selector:
    matchLabels:
      
  replicas: dynamic_parameters
  strategy:
  template:
    metadata:
      annotations:
      labels:
        
        
    spec:
      
      automountServiceAccountToken: false
      containers:
        - name: dynamic_parameters-aggregated-apiserver
          image: dynamic_parameters
          imagePullPolicy: dynamic_parameters
          volumeMounts:
            
            - name: etcd-cert
              mountPath: /etc/etcd/pki
              readOnly: true
            - name: apiserver-cert
              mountPath: /etc/kubernetes/pki
              readOnly: true
          command:
            - /bin/karmada-aggregated-apiserver
            - --kubeconfig=/etc/kubeconfig
            - --authentication-kubeconfig=/etc/kubeconfig
            - --authorization-kubeconfig=/etc/kubeconfig
            - --etcd-cafile=/etc/etcd/pki/ca.crt
            - --etcd-certfile=/etc/etcd/pki/tls.crt
            - --etcd-keyfile=/etc/etcd/pki/tls.key
            - --etcd-servers=dynamic_parameters
            - --etcd-prefix=dynamic_parameters
            - --etcd-cafile=/etc/etcd/pki/server-ca.crt
            - --etcd-certfile=/etc/etcd/pki/karmada.crt
            - --etcd-keyfile=/etc/etcd/pki/karmada.key
            - --etcd-servers=https://etcd-client.dynamic_parameters.svc.dynamic_parameters:2379
            - --tls-cert-file=/etc/kubernetes/pki/karmada.crt
            - --tls-private-key-file=/etc/kubernetes/pki/karmada.key
            - --audit-log-path=-
            - --feature-gates=APIPriorityAndFairness=false
            - --audit-log-maxage=0
            - --audit-log-maxbackup=0
            - --tls-min-version=VersionTLS13
          resources:
          readinessProbe:
            httpGet:
              path: /readyz
              port: 443
              scheme: HTTPS
            initialDelaySeconds: 1
            periodSeconds: 3
            timeoutSeconds: 15
          livenessProbe:
            httpGet:
              path: /healthz
              port: 443
              scheme: HTTPS
            initialDelaySeconds: 10
            periodSeconds: 10
            timeoutSeconds: 15
      nodeSelector:
      affinity:
      tolerations:
      volumes:
        
        - name: apiserver-cert
          secret:
            secretName: dynamic_parameters-cert
        - name: etcd-cert
          secret:
            secretName: dynamic_parameters-cert
            secretName: dynamic_parameters-external-etcd-cert
---
apiVersion: v1
kind: Service
metadata:
  name: dynamic_parameters-aggregated-apiserver
  namespace: dynamic_parameters
  labels:
    
spec:
  ports:
    - port: 443
      protocol: TCP
      targetPort: 443
  selector:
    

---
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: dynamic_parameters-aggregated-apiserver
  namespace: dynamic_parameters
  labels:
    
spec:
  selector:
    matchLabels:
      


---
